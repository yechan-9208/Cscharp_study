# 2022-06-28 study

* 진도 :   ~323p (~chapter7 연습문제까지)


# 오늘 배운 내용

## 7.17 구조체


- 구조체 선언
```
// 구조체선언

struct 구조체이름
{
    // 필드
    // 메소드
}


// 구조체 사용

구조체이름.필드
구조체이름.메소드

```

- 구조체와 클래스의 차이

밑에 표 처럼 클래스는 참조형식이므로 프로그램 전반적으로 사용하기 적합\
구조체는 값 형식이므로 선언 블럭을 벗어나면 데이터가 초기화 되어 메모리 관점에서 효율적임


|특징|클래스|구조체|
|---|---|---|
|키워드|class|struct|
|형식|참조형식(힙)|값형식(스택)|
|복사|얕은복사|깊은복사|
|인스턴스생성|new 연산자와 생성자 필요| 선언만으로도 생성|
|생성자 | 매개변수 없는 생성자 선언 가능| 매개변수 없는 생성자 선언 불가능|
|상속 | 가능 |값 형식으로 상속 불가능|




- 변경불가능 객체가 포함된 구조체

```
readonly struct 구조체이름
{
    public readonly int field;
    public readonly int method()
    {

    }
}
```

구조체 안에 있는 객체도 readonly 선언필요\
변경불가능 메소드도 readonly로 선언 이때, 메소드 내부 값들은 변환 되면 에러가 난다.


## 7.18 튜플
튜플도 여러 필드를 담을 수 있는 구조체\
형식 이름이 없기때문에 즉석에서 사용할 복합 데이터 선언하는데 적합\
구조체 즉 값형식이므로 생성 지역을 벗어나면 스택에서 소멸됨

- 튜플 선언
```
//튜플 선언 (명명되지 않은 튜플)
var tuple = {123,456} 
// 컴파일러가 튜플 모양을 보고 직접 형식을 결정하도록 var선언
//괄호 안에 두개 이상의 필드를 저장함으로써 만들어짐

// 튜플 접근
Console.WriteLine($"{tuple.Item1},{tuple.Item2});


// 필드 이름 지정 튜플 선언 (명명된 튜플)
var tuple = {Name: "홍길동", Age: 17};
Console.WriteLine($"{tuple.Name},{tuple.Age});

//튜플 분해
var tuple = {Name: "홍길동", Age: 17};

// 방법1
var (name,age) = tuple;
Console.WriteLine($"{name},{age}")

//방법2
var (name2,age2) = ("임꺽정",20);
Console.WriteLine($"{name2},{age2}")
```

- 튜플 분해를 이용한 위치 패턴 매칭

식별자나 데이터 형식이 아닌 분해된 요소의 위치에 따라 값이 일치하는지 판단
```
var alice = (job: "학생", age: 17);

var discountRate = alice switch
{
    ("학생",int n) when n<18 => 0.2,
    ("학생",_)  => 0.1,
    ("일반",int n) when n<18 => 0.1,
    ("일반",_)  => 0.05,
    _=>0,
};
```